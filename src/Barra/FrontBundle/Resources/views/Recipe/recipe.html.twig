{% extends 'BarraFrontBundle::layout.html.twig' %}
{% trans_default_domain "messages" %}
{% block title %}{{ recipe.name }}{% endblock %}

{% block javascripts %}
    {{ parent() }}
    {% javascripts '@BarraFrontBundle/Resources/public/js/makroChart.js' %}
        <script type="text/javascript" src="{{ asset_url }}"></script>
    {% endjavascripts %}
{% endblock %}


{% block section %}
    <section class="container">
        <div id="recipeCircles">
            <div id="recipePic">
                {% if recipe.RecipePictures is not empty %}
                    <img class="img-circle" src="{{ asset('uploads/documents/'~(recipe.RecipePictures|first).filename) }}" alt="{{ recipe.name }}">
                {% endif %}
            </div>

            <div id="recipeChartWrapper">
                <canvas id="macroChart" width="301px" height="301px"></canvas>
                <span id="kcalSpan" class="badge" title="Kcal">{{ macros.kcal }}</span>
            </div>
        </div>

        <h1 class="centeredTitle">{{ recipe.name }}</h1>
        <ul id="ingredientList" class="list-unstyled fontL" data-carbs={{ macros.carbs }} data-protein={{ macros.protein }} data-fat={{ macros.fat }}>
            {% for recipeIngredient in recipeIngredients %}
                {% if recipeIngredient.amount is null %}
                    <li>{{ recipeIngredient.ingredient.name }}</li>
                {% else %}
                    <li>{{ recipeIngredient.amount }}{{ recipeIngredient.measurement.type }} {{ recipeIngredient.ingredient.name }}</li>
                {% endif %}
            {% endfor %}
        </ul>

        <ol id="cookingStepList" class="fontM">
            {% for cookingStep in cookingSteps %}
                <li>{{ cookingStep.description }}</li>
            {% endfor %}
        </ol>
    </section>
{% endblock %}